#!/usr/bin/python# -*- coding:utf-8 -*-import refrom tld import get_tldfrom urlparse import *import loggingimport logging.configlogging.config.fileConfig("../config/logging.conf")logger = logging.getLogger()class UrlUtil():    url = ''    #url    host = ''   #host    path = ''   #路径    suffix = '' #后缀    path_suffix = ''    def __init__(self,url):        #补全http        if not url.startswith("http://"):            url = 'http://' + url        self.url = url        self.Analysis()    def Analysis(self):        self.host = get_tld(self.url)        r = urlparse(self.url)        self.path_suffix = r.path        index = self.find_last(r.path,'.')        if not index == -1:            self.suffix = self.path_suffix[index:len(self.path_suffix)]            self.path = self.path_suffix[0:index]        else:            self.path = self.path_suffix    def find_last(self,string, str):        last_position = -1        while True:            position = string.find(str, last_position + 1)            if position == -1:                return last_position            last_position = position    #检查域名是不是本站    def isCheckUrlHost(self,url):        try:            if not url.startswith("http://"):                url = 'http://' + url            tld_host = get_tld(url)            r = urlparse(url)            if self.host == tld_host:                return True        except Exception,e:            return False